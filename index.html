<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Ruta Correntina Ultimate</title>
    <meta name="theme-color" content="#007AFF">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="offline-banner"><i class="fas fa-wifi-slash"></i> Sin conexiÃ³n</div>

    <div id="view-map" class="app-view active">
        <div id="map"></div>
        <div class="top-bar-floating">
            <div class="search-box-glass">
                <i class="fas fa-search"></i>
                <input type="text" id="buscador-input" placeholder="Â¿A dÃ³nde vamos?" onkeyup="filtrarInput(this.value)">
                <div id="weather-widget" class="weather-in-bar" style="display:none;"><i class="fas fa-sun"></i><span>--Â°C</span></div>
            </div>
            <div class="filter-scroll">
                <button class="filter-pill active" onclick="filtrarBoton('todos', this)">Todo</button>
                <button class="filter-pill" onclick="filtrarBoton('turismo', this)">ğŸ“¸ Turismo</button>
                <button class="filter-pill" onclick="filtrarBoton('gastronomia', this)">ğŸ” Comida</button>
                <button class="filter-pill" onclick="filtrarBoton('hospedaje', this)">ğŸ›ï¸ Hotel</button>
            </div>
        </div>
        <div class="map-controls">
            <button onclick="centrarMapaUsuario()" class="btn-float glass-btn"><i class="fas fa-location-arrow"></i></button>
        </div>
        <div id="nav-ui-bottom" class="nav-island">
            <div class="nav-content-wrapper" style="width: 100%;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="nav-data">
                        <div class="nav-main-metric"><span id="nav-time">-- min</span><small id="nav-arrival">Calculando...</small></div>
                        <div class="nav-secondary-metric"><i class="fas fa-walking"></i><span id="nav-dist">-- km</span></div>
                    </div>
                    <div class="nav-actions"><button onclick="finalizarViaje()" class="btn-end-trip"><i class="fas fa-times"></i></button></div>
                </div>
                <button id="btn-toggle-steps" onclick="togglePasos()" style="display:none; width:100%; border:none; background:none; color:var(--primary); margin-top:10px;">Ver indicaciones <i class="fas fa-chevron-down"></i></button>
                <div id="nav-steps-container" class="steps-container" style="display:none;"></div>
            </div>
        </div>
    </div>

    <div id="view-list" class="app-view" style="display:none;">
        <div class="view-header-padded"><h1>Descubre</h1><p>Lo mejor de Corrientes</p></div>
        <div id="eventos-banner-container"></div>
        <div class="section-title" style="padding: 10px 20px;"><h3 style="margin:0;">ğŸ—ºï¸ Circuitos</h3></div>
        <div class="rutas-scroll-inline">
            <button onclick="iniciarRuta('historica')" class="ruta-card-inline"><div class="icon-ruta">ğŸ›ï¸</div><div><strong>HistÃ³rico</strong><small>40 min</small></div></button>
            <button onclick="iniciarRuta('costanera')" class="ruta-card-inline"><div class="icon-ruta">ğŸŒ…</div><div><strong>Costera</strong><small>25 min</small></div></button>
        </div>
        <div class="section-title" style="padding: 20px;"><h3 style="margin:0;">Lugares</h3></div>
        <div id="feed-container" class="feed-grid"></div>
        <div style="height:100px;"></div>
    </div>

    <div id="view-profile" class="app-view" style="display:none;">
        
        <div id="auth-container" style="display: block;">
            <div class="auth-card">
                <div class="auth-header">
                    <div class="auth-icon-circle">
                        <i class="fas fa-map-marked-alt"></i>
                    </div>
                    <h2 id="auth-title" class="auth-title">Bienvenido</h2>
                    <p id="auth-subtitle" class="auth-subtitle">Inicia sesiÃ³n para continuar</p>
                </div>

                <form id="auth-form" onsubmit="handleSubmit(event)">
                    <div class="input-group-premium">
                        <input type="email" id="email-input" class="input-premium" placeholder="Correo electrÃ³nico" required>
                        <i class="fas fa-envelope input-icon"></i>
                    </div>

                    <div class="input-group-premium">
                        <input type="password" id="pass-input" class="input-premium" placeholder="ContraseÃ±a" required>
                        <i class="fas fa-lock input-icon"></i>
                    </div>
                    
                    <button type="submit" id="btn-submit" class="btn-login-premium">
                        Iniciar SesiÃ³n
                    </button>
                </form>

                <div class="auth-footer">
                    <p id="toggle-text" style="color: #8E8E93; font-size: 0.85rem; margin-bottom: 12px;">
                        Â¿Es tu primera vez aquÃ­?
                    </p>
                    <button type="button" id="btn-toggle" onclick="toggleAuthMode()" class="btn-register-link">
                        Crear una cuenta nueva
                    </button>
                </div>
            </div>
        </div>

        <div id="user-profile-content" style="display:none;">
            <div class="profile-header">
                <div class="avatar-circle"><img id="user-avatar" src="" alt="Avatar"></div>
                <h2 id="user-name">Cargando...</h2>
                <span class="role-badge">Turista</span>
                <button onclick="cerrarSesion()" style="background:none; border:none; color:var(--danger); display:block; margin:15px auto; cursor:pointer;">Cerrar SesiÃ³n</button>
            </div>
            <div class="stats-row">
                <div class="stat-box"><strong id="stat-visitados">0</strong><small>Check-ins</small></div>
                <div class="stat-box"><strong id="stat-nivel">1</strong><small>Nivel</small></div>
            </div>
            <div class="section-title" style="padding:0 20px;"><h3 style="margin:0;">ğŸ–ï¸ Insignias</h3></div>
            <div id="badges-container" class="badges-scroll"></div>
            <div class="section-title" style="padding:20px;"><h3 style="margin:0;">ğŸ“¸ Mi Pasaporte</h3></div>
            <div id="pasaporte-grid" class="pasaporte-grid"></div>
            <div class="section-title" style="padding:20px;"><h3>Ajustes</h3></div>
            <div class="settings-list">
                <div class="setting-item" id="dark-mode-toggle"><div class="icon-box"><i class="fas fa-moon"></i></div><span>Modo Oscuro</span><div class="toggle-switch"></div></div>
            </div>
            <div style="height:100px;"></div>
        </div>
    </div>

    <div id="ficha-lugar"></div>
    <nav class="bottom-tab-bar">
        <button class="tab-btn active" onclick="cambiarTab('map')"><i class="fas fa-map-marked-alt"></i><span>Mapa</span></button>
        <button class="tab-btn" onclick="cambiarTab('list')"><i class="fas fa-compass"></i><span>Explorar</span></button>
        <button class="tab-btn" onclick="cambiarTab('profile')"><i class="fas fa-user"></i><span>Perfil</span></button>
    </nav>
    <div id="toast-container"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>